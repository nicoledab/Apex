/************************************************************************************
 * Description :
 * Ver      Date           Author          Modification
 * ===================================================================================
   1.0      2022-04-14     hs.jung          Create
*************************************************************************************/
@IsTest
private class ChangeInfoDetailViewController_test {
    @IsTest
    static void testBehavior() {
        test.startTest();
        Id CorporateRecordTypeId = Schema.SObjectType.Account.getRecordTypeInfosByDeveloperName().get('Corporate').getRecordTypeId();
        Account account = new Account();
        account.RecordTypeId = CorporateRecordTypeId;
        account.Name = 'accountname';
        insert account;

        Id PersonalRecordTypeId = Schema.SObjectType.Contact.getRecordTypeInfosByDeveloperName().get('Personal').getRecordTypeId();
        Contact contact = new Contact();
        contact.RecordTypeId = PersonalRecordTypeId;
        contact.LastName = 'SpTest';
        contact.AccountId = account.Id;
        insert contact;
        CommonCode__c objCommonCode = new CommonCode__c();
        objCommonCode.Name = '우리은행';
        objCommonCode.Type__c = '은행';
        insert objCommonCode;

        PaymentType__c objPaymentType00 = new PaymentType__c();
        objPaymentType00.Contact__c = contact.Id;
        insert objPaymentType00;

        RecurringDonation__c objRDInsert = new RecurringDonation__c();
        objRDInsert.Contact__c = contact.Id;
        objRDInsert.Name = '2022000423_정민지_1';
        objRDInsert.PaymentType__c = objPaymentType00.Id;
        insert objRDInsert;

        F2FRD__c objF2FRD = new F2FRD__c();
        objF2FRD.Name = 'test';
        objF2FRD.Contact__c = contact.Id;
        objF2FRD.RecurringDonation__c = objRDInsert.Id;
        objF2FRD.IsMig__c  = true; // 추가
        insert objF2FRD;

        Id F2FRecordTypeId = Schema.SObjectType.F2FChangeInfo__c.getRecordTypeInfosByDeveloperName().get('F2F').getRecordTypeId();
        F2FChangeInfo__c objCI = new F2FChangeInfo__c();
        objCI.RecordTypeId = F2FRecordTypeId;
        objCI.CMSEvidence__c = '서면스캔업로드(이미지)';
        objCI.AccountNo__c = '4123424423234544';
        objCI.Email__c = 'mnnm33n2@gmail.com';
        objCI.NotAgreeChange__c = true;
        objCI.IsDonationReceiptPostChange__c = true;
        objCI.BankCardName__c = objCommonCode.Id;
        objCI.AccountName__c = 'test ';
        objCI.ConfirmInfo__c = '990101';
        objCI.F2FRD__c = objF2FRD.Id;
        objCI.PaymentRecordlType__c = 'CMS 자동이체';
        objCI.PayCycle__c = '5'; // 현재 picklist 에서 '10'이 없음.
        objCI.ExpireYY__c = '25';
        objCI.ExpireMM__c = '02';
        objCI.BillingKey__c = 'BIKYsavetest1m2203212027286379';
        objCI.PaymentType__c = objPaymentType00.Id;
        insert objCI;

        ChangeInfoDetailViewController.getInitData(objCI.Id);

        test.stopTest();
    }
}
